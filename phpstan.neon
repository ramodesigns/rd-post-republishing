includes:
    - vendor/szepeviktor/phpstan-wordpress/extension.neon

parameters:
    level: 8
    paths:
        - includes
        - cli
        - rd-post-republishing.php
        - uninstall.php

    # Bootstrap WordPress for proper global function detection
    bootstrapFiles:
        - vendor/php-stubs/wordpress-stubs/wordpress-stubs.php

    # Ignore WP-CLI classes (optional dependency)
    ignoreErrors:
        # WP-CLI is an optional dependency - ignore all WP_CLI related errors
        - '#WP_CLI#'

        # Ignore missing generic type hints
        -
            identifier: missingType.generics

        # Database results are stdClass objects with dynamic properties
        - '#Access to an undefined property object::\$#'

        # WordPress functions with dynamic callbacks
        - '#Parameter \#2 \$callback of function add_(action|filter) expects callable#'

        # wpdb::prepare() with dynamically built queries (properly sanitized)
        - '#Parameter \#1 \$query of method wpdb::prepare\(\) expects literal-string#'

        # strtotime() returning false is handled in code
        - '#Parameter \#2 \$timestamp of function wp_date expects int\|null, int\|false given#'

        # random_int() range validation - false positives due to conditional logic
        - '#Parameter \#1 \$min .* of function random_int expects lower number than parameter \#2 \$max#'

        # Method existence checks for optional cache plugins
        - '#Call to function method_exists\(\) with .* will always evaluate to false#'

        # Unreachable code from PHPDoc inference
        - '#Else branch is unreachable because#'

        # version_compare callback is valid for uksort
        - '#Parameter \#2 \$callback of function uksort expects callable#'

        # DB_NAME is defined by WordPress
        - '#Constant DB_NAME not found#'

        # Array column with possible null
        - '#Parameter \#1 \$array of function array_column expects array#'

        # Cannot call method on class-string|object (optional cache plugins)
        - '#Cannot call method deleteCache\(\) on class-string\|object#'

        # get_post_type can return false
        - '#string\|false given#'

        # Unused properties (kept for API consistency)
        - '#Property .* is never read, only written#'

        # Method returns array|null instead of array (wpdb::get_results)
        - '#should return array<int, object> but returns array<int, stdClass>\|null#'

        # wpdb query with prepared string
        - '#Parameter \#1 \$query of method wpdb::query\(\) expects string, string\|null given#'

        # Left side always true - WordPress conditional checks
        - '#Left side of && is always true#'

    # Parallel processing for faster analysis
    parallel:
        maximumNumberOfProcesses: 4

    # Treat phpDoc types strictly
    treatPhpDocTypesAsCertain: true

    # Exception handling settings
    exceptions:
        check:
            missingCheckedExceptionInThrows: false
            tooWideThrowType: false
